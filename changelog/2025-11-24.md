# EPUB Table of Contents Update Script - 2025-11-24 21:12:06

Created `re_toc_epub.py` CLI script to update EPUB table of contents from markdown structure.

## Changes Made

- **Script Implementation** (`src/silly_scripts/cli/re_toc_epub.py`):
  - Accepts EPUB file, markdown ToC file, and optional output file
  - Parses markdown ToC structure (supports # through ###### headers)
  - Scans EPUB files and matches chapters by title in HTML content
  - Updates/recreates hierarchical table of contents structure
  - Handles in-place updates (writes to temp file then replaces)

- **Dependencies** (`pyproject.toml`):
  - Added `ebooklib` for EPUB manipulation
  - Added `lxml` for XML/HTML parsing

- **CLI Registration** (`pyproject.toml`):
  - Registered as `re-toc-epub` command in `[project.scripts]`

- **Tests** (`tests/cli/test_re_toc_epub.py`):
  - 14 comprehensive tests covering:
    - Markdown ToC parsing (basic, empty files, blank lines, non-headers)
    - Chapter finding by title (found, not found, case insensitive)
    - ToC structure creation (simple and hierarchical)
    - Main function execution (with/without output file, error handling)
  - All tests passing ✓
  - All linting checks passing ✓

## Usage

```bash
uv run re-toc-epub <epub_file> <toc_file> [output_file]
```

If `output_file` is not provided, the input EPUB file is overwritten.

